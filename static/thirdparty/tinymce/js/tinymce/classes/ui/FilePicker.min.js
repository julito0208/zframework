
define("tinymce/ui/FilePicker",["tinymce/ui/ComboBox","tinymce/util/Tools"],function(ComboBox,Tools){"use strict";return ComboBox.extend({init:function(settings){var self=this,editor=tinymce.activeEditor,editorSettings=editor.settings;var actionCallback,fileBrowserCallback,fileBrowserCallbackTypes;settings.spellcheck=false;fileBrowserCallbackTypes=editorSettings.file_picker_types||editorSettings.file_browser_callback_types;if(fileBrowserCallbackTypes){fileBrowserCallbackTypes=Tools.makeMap(fileBrowserCallbackTypes,/[, ]/);}
if(!fileBrowserCallbackTypes||fileBrowserCallbackTypes[settings.filetype]){fileBrowserCallback=editorSettings.file_picker_callback;if(fileBrowserCallback&&(!fileBrowserCallbackTypes||fileBrowserCallbackTypes[settings.filetype])){actionCallback=function(){var meta=self.fire('beforecall').meta;meta=Tools.extend({filetype:settings.filetype},meta);fileBrowserCallback.call(editor,function(value,meta){self.value(value).fire('change',{meta:meta});},self.value(),meta);};}else{fileBrowserCallback=editorSettings.file_browser_callback;if(fileBrowserCallback&&(!fileBrowserCallbackTypes||fileBrowserCallbackTypes[settings.filetype])){actionCallback=function(){fileBrowserCallback(self.getEl('inp').id,self.value(),settings.filetype,window);};}}}
if(actionCallback){settings.icon='browse';settings.onaction=actionCallback;}
self._super(settings);}});});