
define("tinymce/ui/Container",["tinymce/ui/Control","tinymce/ui/Collection","tinymce/ui/Selector","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/util/Tools","tinymce/ui/DomUtils"],function(Control,Collection,Selector,Factory,KeyboardNavigation,Tools,DomUtils){"use strict";var selectorCache={};return Control.extend({layout:'',innerClass:'container-inner',init:function(settings){var self=this;self._super(settings);settings=self.settings;self._fixed=settings.fixed;self._items=new Collection();if(self.isRtl()){self.addClass('rtl');}
self.addClass('container');self.addClass('container-body','body');if(settings.containerCls){self.addClass(settings.containerCls);}
self._layout=Factory.create((settings.layout||self.layout)+'layout');if(self.settings.items){self.add(self.settings.items);}
self._hasBody=true;},items:function(){return this._items;},find:function(selector){selector=selectorCache[selector]=selectorCache[selector]||new Selector(selector);return selector.find(this);},add:function(items){var self=this;self.items().add(self.create(items)).parent(self);return self;},focus:function(keyboard){var self=this,focusCtrl,keyboardNav,items;if(keyboard){keyboardNav=self.keyboardNav||self.parents().eq(-1)[0].keyboardNav;if(keyboardNav){keyboardNav.focusFirst(self);return;}}
items=self.find('*');if(self.statusbar){items.add(self.statusbar.items());}
items.each(function(ctrl){if(ctrl.settings.autofocus){focusCtrl=null;return false;}
if(ctrl.canFocus){focusCtrl=focusCtrl||ctrl;}});if(focusCtrl){focusCtrl.focus();}
return self;},replace:function(oldItem,newItem){var ctrlElm,items=this.items(),i=items.length;while(i--){if(items[i]===oldItem){items[i]=newItem;break;}}
if(i>=0){ctrlElm=newItem.getEl();if(ctrlElm){ctrlElm.parentNode.removeChild(ctrlElm);}
ctrlElm=oldItem.getEl();if(ctrlElm){ctrlElm.parentNode.removeChild(ctrlElm);}}
newItem.parent(this);},create:function(items){var self=this,settings,ctrlItems=[];if(!Tools.isArray(items)){items=[items];}
Tools.each(items,function(item){if(item){if(!(item instanceof Control)){if(typeof(item)=="string"){item={type:item};}
settings=Tools.extend({},self.settings.defaults,item);item.type=settings.type=settings.type||item.type||self.settings.defaultType||(settings.defaults?settings.defaults.type:null);item=Factory.create(settings);}
ctrlItems.push(item);}});return ctrlItems;},renderNew:function(){var self=this;self.items().each(function(ctrl,index){var containerElm,fragment;ctrl.parent(self);if(!ctrl._rendered){containerElm=self.getEl('body');fragment=DomUtils.createFragment(ctrl.renderHtml());if(containerElm.hasChildNodes()&&index<=containerElm.childNodes.length-1){containerElm.insertBefore(fragment,containerElm.childNodes[index]);}else{containerElm.appendChild(fragment);}
ctrl.postRender();}});self._layout.applyClasses(self);self._lastRect=null;return self;},append:function(items){return this.add(items).renderNew();},prepend:function(items){var self=this;self.items().set(self.create(items).concat(self.items().toArray()));return self.renderNew();},insert:function(items,index,before){var self=this,curItems,beforeItems,afterItems;items=self.create(items);curItems=self.items();if(!before&&index<curItems.length-1){index+=1;}
if(index>=0&&index<curItems.length){beforeItems=curItems.slice(0,index).toArray();afterItems=curItems.slice(index).toArray();curItems.set(beforeItems.concat(items,afterItems));}
return self.renderNew();},fromJSON:function(data){var self=this;for(var name in data){self.find('#'+name).value(data[name]);}
return self;},toJSON:function(){var self=this,data={};self.find('*').each(function(ctrl){var name=ctrl.name(),value=ctrl.value();if(name&&typeof(value)!="undefined"){data[name]=value;}});return data;},preRender:function(){},renderHtml:function(){var self=this,layout=self._layout,role=this.settings.role;self.preRender();layout.preRender(self);return('<div id="'+self._id+'" class="'+self.classes()+'"'+(role?' role="'+this.settings.role+'"':'')+'>'+'<div id="'+self._id+'-body" class="'+self.classes('body')+'">'+
(self.settings.html||'')+layout.renderHtml(self)+'</div>'+'</div>');},postRender:function(){var self=this,box;self.items().exec('postRender');self._super();self._layout.postRender(self);self._rendered=true;if(self.settings.style){DomUtils.css(self.getEl(),self.settings.style);}
if(self.settings.border){box=self.borderBox();DomUtils.css(self.getEl(),{'border-top-width':box.top,'border-right-width':box.right,'border-bottom-width':box.bottom,'border-left-width':box.left});}
if(!self.parent()){self.keyboardNav=new KeyboardNavigation({root:self});}
return self;},initLayoutRect:function(){var self=this,layoutRect=self._super();self._layout.recalc(self);return layoutRect;},recalc:function(){var self=this,rect=self._layoutRect,lastRect=self._lastRect;if(!lastRect||lastRect.w!=rect.w||lastRect.h!=rect.h){self._layout.recalc(self);rect=self.layoutRect();self._lastRect={x:rect.x,y:rect.y,w:rect.w,h:rect.h};return true;}},reflow:function(){var i;if(this.visible()){Control.repaintControls=[];Control.repaintControls.map={};this.recalc();i=Control.repaintControls.length;while(i--){Control.repaintControls[i].repaint();}
if(this.settings.layout!=="flow"&&this.settings.layout!=="stack"){this.repaint();}
Control.repaintControls=[];}
return this;}});});