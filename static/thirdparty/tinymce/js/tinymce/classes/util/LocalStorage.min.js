
define("tinymce/util/LocalStorage",[],function(){var LocalStorage,storageElm,items,keys,userDataKey,hasOldIEDataSupport;try{if(window.localStorage){return localStorage;}}catch(ex){}
userDataKey="tinymce";storageElm=document.documentElement;hasOldIEDataSupport=!!storageElm.addBehavior;if(hasOldIEDataSupport){storageElm.addBehavior('#default#userData');}
function updateKeys(){keys=[];for(var key in items){keys.push(key);}
LocalStorage.length=keys.length;}
function load(){var key,data,value,pos=0;items={};if(!hasOldIEDataSupport){return;}
function next(end){var value,nextPos;nextPos=end!==undefined?pos+end:data.indexOf(',',pos);if(nextPos===-1||nextPos>data.length){return null;}
value=data.substring(pos,nextPos);pos=nextPos+1;return value;}
storageElm.load(userDataKey);data=storageElm.getAttribute(userDataKey)||'';do{var offset=next();if(offset===null){break;}
key=next(parseInt(offset,32)||0);if(key!==null){offset=next();if(offset===null){break;}
value=next(parseInt(offset,32)||0);if(key){items[key]=value;}}}while(key!==null);updateKeys();}
function save(){var value,data='';if(!hasOldIEDataSupport){return;}
for(var key in items){value=items[key];data+=(data?',':'')+key.length.toString(32)+','+key+','+value.length.toString(32)+','+value;}
storageElm.setAttribute(userDataKey,data);try{storageElm.save(userDataKey);}catch(ex){}
updateKeys();}
LocalStorage={key:function(index){return keys[index];},getItem:function(key){return key in items?items[key]:null;},setItem:function(key,value){items[key]=""+value;save();},removeItem:function(key){delete items[key];save();},clear:function(){items={};save();}};load();return LocalStorage;});