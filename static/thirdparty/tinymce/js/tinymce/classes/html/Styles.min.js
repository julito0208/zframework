
define("tinymce/html/Styles",[],function(){return function(settings,schema){var rgbRegExp=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,urlOrStrRegExp=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,styleRegExp=/\s*([^:]+):\s*([^;]+);?/g,trimRightRegExp=/\s+$/,undef,i,encodingLookup={},encodingItems,validStyles,invalidStyles,invisibleChar='\uFEFF';settings=settings||{};if(schema){validStyles=schema.getValidStyles();invalidStyles=schema.getInvalidStyles();}
encodingItems=('\\" \\\' \\; \\: ; : '+invisibleChar).split(' ');for(i=0;i<encodingItems.length;i++){encodingLookup[encodingItems[i]]=invisibleChar+i;encodingLookup[invisibleChar+i]=encodingItems[i];}
function toHex(match,r,g,b){function hex(val){val=parseInt(val,10).toString(16);return val.length>1?val:'0'+val;}
return'#'+hex(r)+hex(g)+hex(b);}
return{toHex:function(color){return color.replace(rgbRegExp,toHex);},parse:function(css){var styles={},matches,name,value,isEncoded,urlConverter=settings.url_converter;var urlConverterScope=settings.url_converter_scope||this;function compress(prefix,suffix,noJoin){var top,right,bottom,left;top=styles[prefix+'-top'+suffix];if(!top){return;}
right=styles[prefix+'-right'+suffix];if(!right){return;}
bottom=styles[prefix+'-bottom'+suffix];if(!bottom){return;}
left=styles[prefix+'-left'+suffix];if(!left){return;}
var box=[top,right,bottom,left];i=box.length-1;while(i--){if(box[i]!==box[i+1]){break;}}
if(i>-1&&noJoin){return;}
styles[prefix+suffix]=i==-1?box[0]:box.join(' ');delete styles[prefix+'-top'+suffix];delete styles[prefix+'-right'+suffix];delete styles[prefix+'-bottom'+suffix];delete styles[prefix+'-left'+suffix];}
function canCompress(key){var value=styles[key],i;if(!value){return;}
value=value.split(' ');i=value.length;while(i--){if(value[i]!==value[0]){return false;}}
styles[key]=value[0];return true;}
function compress2(target,a,b,c){if(!canCompress(a)){return;}
if(!canCompress(b)){return;}
if(!canCompress(c)){return;}
styles[target]=styles[a]+' '+styles[b]+' '+styles[c];delete styles[a];delete styles[b];delete styles[c];}
function encode(str){isEncoded=true;return encodingLookup[str];}
function decode(str,keep_slashes){if(isEncoded){str=str.replace(/\uFEFF[0-9]/g,function(str){return encodingLookup[str];});}
if(!keep_slashes){str=str.replace(/\\([\'\";:])/g,"$1");}
return str;}
function processUrl(match,url,url2,url3,str,str2){str=str||str2;if(str){str=decode(str);return"'"+str.replace(/\'/g,"\\'")+"'";}
url=decode(url||url2||url3);if(!settings.allow_script_urls){var scriptUrl=url.replace(/[\s\r\n]+/,'');if(/(java|vb)script:/i.test(scriptUrl)){return"";}
if(!settings.allow_svg_data_urls&&/^data:image\/svg/i.test(scriptUrl)){return"";}}
if(urlConverter){url=urlConverter.call(urlConverterScope,url,'style');}
return"url('"+url.replace(/\'/g,"\\'")+"')";}
if(css){css=css.replace(/[\u0000-\u001F]/g,'');css=css.replace(/\\[\"\';:\uFEFF]/g,encode).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(str){return str.replace(/[;:]/g,encode);});while((matches=styleRegExp.exec(css))){name=matches[1].replace(trimRightRegExp,'').toLowerCase();value=matches[2].replace(trimRightRegExp,'');value=value.replace(/\\[0-9a-f]+/g,function(e){return String.fromCharCode(parseInt(e.substr(1),16));});if(name&&value.length>0){if(!settings.allow_script_urls&&(name=="behavior"||/expression\s*\(|\/\*|\*\//.test(value))){continue;}
if(name==='font-weight'&&value==='700'){value='bold';}else if(name==='color'||name==='background-color'){value=value.toLowerCase();}
value=value.replace(rgbRegExp,toHex);value=value.replace(urlOrStrRegExp,processUrl);styles[name]=isEncoded?decode(value,true):value;}
styleRegExp.lastIndex=matches.index+matches[0].length;}
compress("border","",true);compress("border","-width");compress("border","-color");compress("border","-style");compress("padding","");compress("margin","");compress2('border','border-width','border-style','border-color');if(styles.border==='medium none'){delete styles.border;}
if(styles['border-image']==='none'){delete styles['border-image'];}}
return styles;},serialize:function(styles,elementName){var css='',name,value;function serializeStyles(name){var styleList,i,l,value;styleList=validStyles[name];if(styleList){for(i=0,l=styleList.length;i<l;i++){name=styleList[i];value=styles[name];if(value!==undef&&value.length>0){css+=(css.length>0?' ':'')+name+': '+value+';';}}}}
function isValid(name,elementName){var styleMap;styleMap=invalidStyles['*'];if(styleMap&&styleMap[name]){return false;}
styleMap=invalidStyles[elementName];if(styleMap&&styleMap[name]){return false;}
return true;}
if(elementName&&validStyles){serializeStyles('*');serializeStyles(elementName);}else{for(name in styles){value=styles[name];if(value!==undef&&value.length>0){if(!invalidStyles||isValid(name,elementName)){css+=(css.length>0?' ':'')+name+': '+value+';';}}}}
return css;}};};});