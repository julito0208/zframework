
define("tinymce/WindowManager",["tinymce/ui/Window","tinymce/ui/MessageBox"],function(Window,MessageBox){return function(editor){var self=this,windows=[];function getTopMostWindow(){if(windows.length){return windows[windows.length-1];}}
self.windows=windows;editor.on('remove',function(){var i=windows.length;while(i--){windows[i].close();}});self.open=function(args,params){var win;editor.editorManager.setActive(editor);args.title=args.title||' ';args.url=args.url||args.file;if(args.url){args.width=parseInt(args.width||320,10);args.height=parseInt(args.height||240,10);}
if(args.body){args.items={defaults:args.defaults,type:args.bodyType||'form',items:args.body};}
if(!args.url&&!args.buttons){args.buttons=[{text:'Ok',subtype:'primary',onclick:function(){win.find('form')[0].submit();}},{text:'Cancel',onclick:function(){win.close();}}];}
win=new Window(args);windows.push(win);win.on('close',function(){var i=windows.length;while(i--){if(windows[i]===win){windows.splice(i,1);}}
editor.focus();});if(args.data){win.on('postRender',function(){this.find('*').each(function(ctrl){var name=ctrl.name();if(name in args.data){ctrl.value(args.data[name]);}});});}
win.features=args||{};win.params=params||{};editor.nodeChanged();return win.renderTo().reflow();};self.alert=function(message,callback,scope){MessageBox.alert(message,function(){if(callback){callback.call(scope||this);}else{editor.focus();}});};self.confirm=function(message,callback,scope){MessageBox.confirm(message,function(state){callback.call(scope||this,state);});};self.close=function(){if(getTopMostWindow()){getTopMostWindow().close();}};self.getParams=function(){return getTopMostWindow()?getTopMostWindow().params:null;};self.setParams=function(params){if(getTopMostWindow()){getTopMostWindow().params=params;}};self.getWindows=function(){return windows;};};});